; Please config file
; Leaving this file as is is enough to use plz to build your project.
; Please will stay on whatever version you currently have until you run
; 'plz update', when it will download the latest available version.
;
; Or you can uncomment the following to pin everyone to a particular version;
; when you change it all users will automatically get updated.
[please]
version = 16.21.3
; Support the non *-rules repo name format of Please plugins.
PluginRepo = "https://github.com/{owner}/{plugin}/archive/{revision}.zip"


[featureflags]
ExcludeGoRules = true

; Define the Plugin configuration options.
[PluginDefinition]
name = buildkit
BuildDefsDir = "build/defs"

[PluginConfig "buildctl"]
DefaultValue = "//tools/buildctl:buildctl"
Inherit = true

[PluginConfig "image_repository_prefix"]
DefaultValue = ""
Optional = true

[PluginConfig "image_generated_pkg_offset"]
DefaultValue = 0
Optional = true
Inherit = true

[PluginConfig "sbom_tool"]
DefaultValue = "//third_party/binary/anchore/syft"
Optional = true
Inherit = true

[PluginConfig "image_helper_tool"]
DefaultValue = "//tools/image_helper"
Optional = true
Inherit = true

[PluginConfig "crane_tool"]
DefaultValue = "//third_party/binary/go-containerregistry/crane"
Optional = true
Inherit = true

[PluginConfig "jq_tool"]
DefaultValue = "//third_party/binary/stedolan/jq"
Optional = true
Inherit = true

[PluginConfig "scratch_tls_cas"]
DefaultValue = "//third_party/tls:mozilla_cas"
Help = "A Please target which outputs the file of PEM encoded CA certificates to trust."
Optional = true
Inherit = true

[PluginConfig "scratch_tls_cas_path"]
DefaultValue = "/etc/ssl/certs/ca-certificates.crt"
Help = "The path in the scratch image to write the TLS CA file to."
Optional = true
Inherit = true

; Use the plugin in this repository for tests.
[Plugin "buildkit"]
ImageRepositoryPrefix = "ghcr.io/vjftw/please-buildkit"

; Go Plugin is used to build helpers.
[Plugin "go"]
Target = //third_party/plugins:go
ImportPath = github.com/VJftw/please-buildkit
gotool = //third_party/go:toolchain|go
